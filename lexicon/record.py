from math import sqrt

direct_record_lexicon = {
    "help_message": (
        "–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –ø—Ä—è–º—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º\n"
        "–Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:\n\n"
        "‚Ä¢ –∫–æ–ª-–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π (—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏–∑–º–µ—Ä—è–ª–∞—Å—å –¥–∞–Ω–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞)\n"
        "‚Ä¢ —Å–∞–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é\n"
        "‚Ä¢ –ø—Ä–∏–±–æ—Ä–Ω—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ —Ç–∞–∫–æ–≤–∞ –∏–º–µ–µ—Ç—Å—è. –û–±—ã—á–Ω–æ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è \"Œò\")\n\n"
        "–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:\n"
        "```\n"
        "n\n"
        "x1, x2, x3, ...\n"
        "Œò\n"
        "```\n"
        "*–ü—Ä–∏–º–µ—Ä:*\n"
        "```\n"
        "5\n"
        "10.5, 10.7, 10.4, 10.6, 10.5\n"
        "0.1\n"
        "```\n"
        "*(–ï—Å–ª–∏ –ø—Ä–∏–±–æ—Ä–Ω–æ–π –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–µ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏)*\n\n"
        "–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ —è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–µ–π"
        "–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏"
    ),


}



def get_avarage_message(record_count: int, records: list[float], result: float) -> str:
    return (
        "üìä **–†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ**\n\n"
        
        "**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n"
        f"‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π: `{record_count}`\n"
        f"‚Ä¢ –ó–Ω–∞—á–µ–Ω–∏—è: `{', '.join(f'{x}' for x in records)}`\n\n"
        
        "**–§–æ—Ä–º—É–ª–∞:**\n"
        "```\n"
        f"xÃÑ = (‚àëx·µ¢) / n\n"
        f"   = ({' + '.join(f'{x}' for x in records)}) / {record_count}\n"
        "```\n\n"
        
        "**–í—ã—á–∏—Å–ª–µ–Ω–∏—è:**\n"
        f"‚Ä¢ –°—É–º–º–∞: `{sum(records)}`\n"
        f"‚Ä¢ –î–µ–ª–µ–Ω–∏–µ –Ω–∞ `{record_count}`\n\n"
        
        "üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        f"```\n"
        f"xÃÑ = {result:.6f}\n"
        "```"
    )


def get_rms_message(record_count: int, avarage: float, sum_squared: float, result: float):
    return (
        "üìà **–†–∞—Å—á–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–°–ö–û)**\n\n"
        
        "**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n"
        f"‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π: `{record_count}`\n"
        f"‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: `{avarage:.6f}`\n\n"
        
        "**–§–æ—Ä–º—É–ª–∞:**\n"
        "```\n"
        "œÉ = ‚àö[‚àë(x·µ¢ - xÃÑ)¬≤ / (n-1)]\n"
        "```\n\n"
        
        f"\n**–°—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤:** `{sum_squared:.6f}`\n"
        f"**–î–µ–ª–µ–Ω–∏–µ –Ω–∞ (n-1):** `{sum_squared:.6f} / {record_count-1} = {sum_squared/(record_count-1):.6f}`\n"
        f"**–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ—Ä–Ω—è:** `‚àö{sum_squared/(record_count-1):.6f}`\n\n"
        
        "üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        f"```\n"
        f"œÉ = {result:.6f}\n"
        "```"
    )

def get_rmsm_message(record_count: int, s: float, result: float):
    return (
        "üéØ **–†–∞—Å—á–µ—Ç –°–ö–û —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è**\n\n"
        
        "**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n"
        f"‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π: `{record_count}`\n"
        f"‚Ä¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: `{s:.6f}`\n\n"
        
        "**–§–æ—Ä–º—É–ª–∞:**\n"
        "```\n"
        f"s‚Çì = œÉ / ‚àön\n"
        f"   = {s:.6f} / ‚àö{record_count}\n"
        "```\n\n"
        
        "**–í—ã—á–∏—Å–ª–µ–Ω–∏—è:**\n"
        f"‚Ä¢ ‚àö{record_count} = `{sqrt(record_count):.6f}`\n"
        f"‚Ä¢ {s:.6f} / {sqrt(record_count):.6f} = `{result:.6f}`\n\n"
        
        "üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        f"```\n"
        f"s‚Çì = {result:.6f}\n"
        "```\n\n"
        "*–°–ö–û —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è*"
    )


def get_tpn_message(record_count: int, result: float) -> str:
    return (
        "üìä **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°—Ç—å—é–¥–µ–Ω—Ç–∞**\n\n"
        
        "**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n"
        f"‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π: `{record_count}`\n"
        f"‚Ä¢ –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è: `95%`\n"
        f"‚Ä¢ –ß–∏—Å–ª–æ —Å—Ç–µ–ø–µ–Ω–µ–π —Å–≤–æ–±–æ–¥—ã: `{record_count - 1}`\n\n"
        
        "**–†–µ–∑—É–ª—å—Ç–∞—Ç:**\n"
        f"```\n"
        f"t‚Çç‚ÇÄ.‚Çâ‚ÇÖ, {record_count-1}‚Çé = {result}\n"
        "```\n\n"
        
    )

def get_error_rate_message(instrument_err_rate: float, tpn: float, s_: float ,result: float) -> str:
    return (
        "üî¨ *–†–∞—Å—á–µ—Ç –ø–æ–ª–Ω–æ–π –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏*\n\n"
        
        "*–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:*\n"
        f"‚Ä¢ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°—Ç—å—é–¥–µ–Ω—Ç–∞ (t‚Çö,‚Çô): `{tpn:.4f}`\n"
        f"‚Ä¢ –°–ö–û —Å—Ä–µ–¥–Ω–µ–≥–æ (s): `{s_:.6f}`\n"
        f"‚Ä¢ –ü—Ä–∏–±–æ—Ä–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å (Œò): `{instrument_err_rate:.6f}`\n\n"
        
        "*–§–æ—Ä–º—É–ª–∞:*\n"
        "```\n"
        "Œî = ‚àö[(t‚Çö,‚Çô √ó s)¬≤ + Œò¬≤]\n"
        "```\n\n"
        
        "*–í—ã—á–∏—Å–ª–µ–Ω–∏–µ:*\n"
        f"1. t‚Çö,‚Çô √ó s = `{tpn:.4f} √ó {s_:.6f} = {tpn * s_:.6f}`\n"
        f"2. (t‚Çö,‚Çô √ó s)¬≤ = `({tpn * s_:.6f})¬≤ = {(tpn * s_) ** 2:.8f}`\n"
        f"3. Œò¬≤ = `({instrument_err_rate:.6f})¬≤ = {instrument_err_rate ** 2:.8f}`\n"
        f"4. –°—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ = `{(tpn * s_) ** 2:.8f} + {instrument_err_rate ** 2:.8f} = {((tpn * s_) ** 2) + (instrument_err_rate ** 2):.8f}`\n"
        f"5. ‚àö(—Å—É–º–º—ã) = `‚àö{((tpn * s_) ** 2) + (instrument_err_rate ** 2):.8f} = {result:.6f}`\n\n"
        
        f"üìä *–ü–æ–ª–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å: Œî = {result:.6f}*"
    )


def get_result_message(value: float, erate: float, rounded_erate: float, rounded_value: float) -> str:
    return (
        "## üéØ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞\n\n"
        
        "### –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:\n"
        f"- **–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `{value:.8f}`\n"
        f"- **–ü–æ–ª–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å**: `{erate:.8f}`\n\n"
        
        "### –ü—Ä–æ—Ü–µ—Å—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è:\n"
        f"1. **–ê–Ω–∞–ª–∏–∑ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏**: `{erate:.6f}`\n"
        f"2. **–ü–µ—Ä–≤–∞—è –∑–Ω–∞—á–∞—â–∞—è —Ü–∏—Ñ—Ä–∞**: `{rounded_erate}`\n"
        f"3. **–û–∫—Ä—É–≥–ª–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ**: `{value:.6f}` ‚Üí `{rounded_value}`\n"
        f"4. **–û–∫—Ä—É–≥–ª–µ–Ω–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å**: `{erate:.6f}` ‚Üí `{rounded_erate}`\n\n"
        
        "### üìä –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:\n"
        "```\n"
        f"x = ({rounded_value} ¬± {rounded_erate}) –µ–¥. –∏–∑–º.\n"
        "```\n\n"
        
    )
    